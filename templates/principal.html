<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/style.css') }}">
    <title>Principal | Easy Parking</title>
</head>
<body>
    <div class="conten">
        {% if vals != None: %}
        <div class="passedL">
            <span>Easy Parking</span>
            <img src="{{ url_for('static',filename='assets/images/SVGS/ok.svg') }}" alt="Ok">
            <h1>Valor a cobrar: ${{ vals }}.</h1>
            <button onclick="desWarn('.passedL')">Ok</button>
        </div>
        {% endif %}
        <div class="caja">
            {% if cs > 0: %}
            <input type="text" id="FiltrarContenido" placeholder="Buscar vehÃ­culo">
            {% for vehiculo in vehics: %}
            <div class="vehiculo">
                <span class="dato"><b>Tipo: </b>{{ vehiculo.tipo_de_vehiculo }}</span>
                <span class="vcolor">
                    {% if vehiculo.tipo_de_vehiculo == "Motocicleta": %}
                    <svg height='30px' width='30px'  fill="{{ vehiculo.color }}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 90 90" enable-background="new 0 0 90 90" xml:space="preserve"><path d="M68.943,32.642c1.387,0.012,4.053,1.657,4.959,2.96c1.313,1.89-0.824,3.354-3.193,1.868  c-1.223-0.77-3.307-3.415-2.473-4.545C68.377,32.727,68.627,32.637,68.943,32.642z M62.199,21.919  c-1.566-0.035-2.801,1.694-2.369,2.804l1.494,3.838c0.59,1.51,0.172,2.328-0.625,2.655c-13.107,7.201-26.115,14.546-38.926,22.252  c-2.438,1.553-0.594,4.521,1.875,3.756l3.254-1.016c-0.025,0.422-0.072,0.844-0.188,1.271c-0.885,3.297-4.281,5.255-7.576,4.369  c-3.297-0.881-5.256-4.275-4.375-7.572c0.885-3.296,4.281-5.254,7.576-4.374l5.516-3.749c-1.193-0.875-2.541-1.542-3.994-1.933  c-6.432-1.724-13.051,2.099-14.773,8.535c-1.725,6.432,2.098,13.05,8.529,14.774c6.432,1.724,13.051-2.094,14.773-8.53  c0.406-1.51,0.506-3.067,0.318-4.589l2.859-0.89c0.129,0.771,0.207,1.556,0.207,2.359c0,1.463-0.213,2.868-0.604,4.208h19.414  c-0.391-1.34-0.604-2.745-0.604-4.208c0-5.427,2.875-10.165,7.182-12.821l5.779,13.201c1.125,2.567,4.994,1.625,4.318-1.442  l-1.115-5.021c2.891,0.526,5.084,3.047,5.084,6.083c0,3.411-2.771,6.182-6.188,6.182c-3.41,0-6.182-2.771-6.182-6.182  c0-0.672,0.109-1.313,0.307-1.917l-3.098-6.124c-1.916,2.134-3.088,4.947-3.088,8.041c0,6.66,5.4,12.061,12.061,12.061  s12.066-5.4,12.066-12.061c0-3.197-1.271-6.265-3.537-8.53c-2.26-2.26-5.332-3.536-8.529-3.536c-0.072,0-0.146,0.005-0.219,0.011  l-0.625-2.817h6.941c1.297,0,2.521-0.442,2.234-2.302c-1.166-7.563-5.973-15.196-14.857-16.753  C62.414,21.937,62.305,21.919,62.199,21.919z"></path><path d="M51.107,29.367c-0.803,0.011-1.629,0.084-2.473,0.209c-4.256,0.666-8.225,2.718-10.369,5.557  c-1.1,1.458-1.646,2.192-3.463,2.192h-2.928c-1.859,0-1.656-1.047-2.988-2.074c-1.24-0.957-2.463-1.91-5.213-1.962l-8.385-0.12  c-2.15,0-2.191,1.047-1.119,3.317c0.682,1.453,2.125,3.239,3.9,3.583l4.645,0.896c2.525,0.337,5.01,1.198,6.963,2.833  c0.615,0.509,1.172,1.052,1.697,1.613l25.658-14.814C55.389,29.773,53.348,29.342,51.107,29.367z"></path></svg>
                    {% elif vehiculo.tipo_de_vehiculo == "Automovil" or vehiculo.tipo_de_vehiculo == "Camioneta": %}
                    <svg height='30px' width='30px'  fill="{{ vehiculo.color }}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 90 90" enable-background="new 0 0 90 90" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M56.157,61.371H33.766c-1.968,0-4.506,2.167-4.506,4.864h31.402  C60.662,63.538,58.131,61.371,56.157,61.371z M14.459,49.819c-1.86-0.017-2.641,0.571-2.938,1.489  c-0.532,1.63-1.141,4.853,1.755,5.916c2.375,0.871,7.385,1.495,10.047,1.891c2.563,0.385,3.208-1.124,2.313-3.379  c-1.658-4.192-5.412-5.074-8.943-5.683C15.813,49.902,15.08,49.828,14.459,49.819z M75.459,49.819  c-0.62,0.009-1.354,0.083-2.235,0.233c-3.521,0.609-7.281,1.491-8.938,5.683c-0.891,2.256-0.25,3.765,2.313,3.379  c2.667-0.4,7.661-1.02,10.041-1.891c2.896-1.063,2.292-4.285,1.761-5.916C78.105,50.391,77.318,49.803,75.459,49.819z   M44.959,16.407c-8.98,0-14.38,0.254-17.407,1.063c-1.297,0.35-2.213,1.678-2.552,2.636l-6.303,17.276  c5.396,0.411,16.303,1.369,26.262,1.369c9.962,0,20.864-0.958,26.26-1.369l-6.292-17.276c-0.339-0.958-1.265-2.286-2.563-2.636  C59.339,16.662,53.938,16.407,44.959,16.407z M44.959,11.115c9.058,0,14.629,0.136,18.781,1.246  c3.546,0.954,5.343,3.823,6.172,5.973l6.552,17.068l5.088-0.005c2.052,0,3.093,0.975,3.093,2.636c0,2.213-1.036,4.276-3.869,5.74  l0.754,1.342c0.996,1.896,1.724,3.907,1.724,5.705v14.724c0,2.463-1.703,4.541-3.692,5.317v5.552c0,1.35-1.078,2.427-2.422,2.427  h-6.885c-1.343,0-2.432-1.078-2.432-2.427v-5.213h-45.73v5.213c0,1.35-1.083,2.427-2.426,2.427h-6.891  c-1.344,0-2.421-1.078-2.421-2.427V70.86c-1.986-0.776-3.688-2.854-3.688-5.317V50.819c0-1.798,0.724-3.808,1.719-5.705l0.754-1.342  c-2.828-1.464-3.869-3.527-3.864-5.74c0-1.662,1.036-2.636,3.088-2.636l5.1,0.005l6.546-17.068c0.823-2.15,2.625-5.02,6.172-5.973  C30.334,11.251,35.902,11.115,44.959,11.115z"></path></svg>
                    {% elif vehiculo.tipo_de_vehiculo == "Camion": %}
                    <svg height='30px' width='30px'  fill="{{ vehiculo.color }}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 90 90" enable-background="new 0 0 90 90" xml:space="preserve"><path d="M79.106,47.453c0.833-0.041,1.698,0.484,2.187,1.334c0.678,1.166,0.438,2.567-0.525,3.124  c-0.963,0.553-2.292,0.058-2.963-1.109c-0.678-1.166-0.442-2.567,0.521-3.124C78.56,47.542,78.825,47.464,79.106,47.453z   M65.003,34.609h5.347c1.136,0,1.287,0,1.917,1.043l4.401,7.29c0.692,1.142-0.157,2.052-1.177,1.798l-10.504-2.625  c-0.86-0.213-1.25-0.302-1.25-1.244v-5C63.737,35.069,63.935,34.609,65.003,34.609z M8.597,22.93c-1.803,0-3.26,0.891-3.26,3.005  v30.997c0,2.114,1.453,3.817,3.254,3.817h2.098c0-4.489,3.647-8.135,8.135-8.135c2.156,0,4.229,0.859,5.754,2.384  c1.043,1.043,1.767,2.345,2.121,3.751c0.896-3.521,4.078-6.135,7.874-6.135c2.157,0,4.229,0.859,5.755,2.384  c1.525,1.527,2.38,3.595,2.38,5.751H62.07c0-4.489,3.646-8.135,8.135-8.135c2.156,0,4.224,0.859,5.749,2.384  c1.527,1.527,2.387,3.595,2.387,5.751h3.5c1.566,0,2.823-1.479,2.823-3.309v-7.17c0-2.817-0.25-3.452-1.063-4.785l-7.379-12.197  c-1.292-2.13-1.656-3.297-4.271-3.297h-12.78c-1.548,0-2.193,0.979-2.193,2.448v17.611c0,0.679-0.547,1.224-1.224,1.224  c-0.678,0-1.219-0.545-1.219-1.224V25.935c0-2.114-1.459-3.005-3.26-3.005H8.597z"></path><path d="M34.573,67.004c-3.452,0-6.254-2.802-6.254-6.255s2.802-6.26,6.254-6.26c1.663,0,3.255,0.661,4.428,1.833  c1.172,1.176,1.833,2.771,1.833,4.427C40.834,64.202,38.031,67.004,34.573,67.004z M34.573,63.093c1.297,0,2.349-1.052,2.349-2.344  c0-1.297-1.052-2.349-2.349-2.349c-1.291,0-2.342,1.052-2.342,2.349C32.23,62.041,33.282,63.093,34.573,63.093z"></path><path d="M70.206,67.004c-3.453,0-6.254-2.802-6.254-6.255s2.801-6.26,6.254-6.26c1.661,0,3.249,0.661,4.421,1.833  c1.177,1.176,1.838,2.771,1.838,4.427C76.465,64.202,73.658,67.004,70.206,67.004z M70.206,63.093c1.297,0,2.349-1.052,2.349-2.344  c0-1.297-1.052-2.349-2.349-2.349s-2.344,1.052-2.344,2.349C67.862,62.041,68.908,63.093,70.206,63.093z"></path><path d="M18.825,67.004c-3.453,0-6.254-2.802-6.254-6.255s2.801-6.26,6.254-6.26c1.662,0,3.254,0.661,4.427,1.833  c1.172,1.176,1.833,2.771,1.833,4.427C25.084,64.202,22.284,67.004,18.825,67.004z M18.825,63.093c1.297,0,2.35-1.052,2.35-2.344  c0-1.297-1.052-2.349-2.35-2.349c-1.292,0-2.343,1.052-2.343,2.349C16.481,62.041,17.533,63.093,18.825,63.093z"></path></svg>
                    {% elif vehiculo.tipo_de_vehiculo == "Otros": %}
                    <span style="background-color:{{ vehiculo.color }};" class="vcolor"></span>
                    {% endif %}
                </span>
                <span class="dato"><b>Plaza: </b>{{ vehiculo.plaza }}</span>
                <b style="color: #0669b2;">Entrada: 
                    <span id="hEntrada{{ vehiculo.id }}" style="color: #000;font-weight: 100;">{{ vehiculo.hora_entrada }}</span>
                </b>
                <span class="dato" id="tiempo{{ vehiculo.id }}"><b>Tiempo: </b></span>
                <span class="placa">{{ vehiculo.placa }}<b>EASY PARKING</b></span>
                <button class="btSalida" onclick="salidaV('{{ vehiculo.id }}')">Salida</button>
            </div>
            <script type="text/javascript">
                setInterval(() => {
                    var fechaHora = new Date();
                    var h = fechaHora.getHours();
                    var m = fechaHora.getMinutes();
                    var s = fechaHora.getSeconds();
                    var tim = document.querySelector("#hEntrada{{ vehiculo.id }}").innerText.split(":")
                    var hor = tim[0];
                    var min = tim[1];
                    var seg = tim[2];
                    horas = h-parseFloat(hor);
                    minutos = m-parseFloat(min);
                    segundos = s-parseFloat(seg);
                    var horas_Segundos = horas * 3600;
                    var minutos_Segundos = minutos * 60;
                    var segundos = segundos + minutos_Segundos + horas_Segundos;
                    var hours = Math.floor( segundos / 3600 );
                    var minutes = Math.floor( (segundos % 3600) / 60 );
                    var seconds = segundos % 60;
                    minutes = minutes < 10 ? '0' + minutes : minutes;
                    seconds = seconds < 10 ? '0' + seconds : seconds;
                    document.querySelector('#tiempo{{ vehiculo.id }}').innerHTML = `<b>Tiempo: </b>${hours}:${minutes}:${seconds}`;
                },1000);
            </script>
            {% endfor %}
            {% else: %}
            <h1>No hay registros para mostrar</h1>
            <div class="icono">
                <img src="{{ url_for('static',filename='assets/images/sec4/fondo.png') }}" alt="Fondo" class="fondo">
                <img src="{{ url_for('static',filename='assets/images/sec4/auto.png') }}" alt="Auto" class="auto">
                <img src="{{ url_for('static',filename='assets/images/sec4/engrane11.png') }}" style="margin: 10% 10% 45% 47%;" alt="Engrane" class="engrane1 engrane11">
                    <img src="{{ url_for('static',filename='assets/images/sec4/engrane22.png') }}" style="margin: 10% 10% 29% 69%;" alt="Engrane" class="engrane2">
                <img src="{{ url_for('static',filename='assets/images/sec4/candado.png') }}" alt="Candado" class="ubic">
                <img src="{{ url_for('static',filename='assets/images/sec4/woman.png') }}" alt="Personas" class="person2">
                <img src="{{ url_for('static',filename='assets/images/sec4/man.png') }}" alt="Personas" class="person">
            </div>
            {% endif %}
        </div>
    </div>
</body>
<script src="{{ url_for('static',filename='js/main.js') }}"></script>
<script src="{{ url_for('static',filename='js/jquery.min.js') }}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        (function($) {
            $('#FiltrarContenido').keyup(function () {
                var ValorBusqueda = new RegExp($(this).val(), 'i');
                $('.vehiculo').hide();
                $('.vehiculo').filter(function () {
                    return ValorBusqueda.test($(this).text());
                }).show();
            })
        }(jQuery));
	});
</script>
</html>